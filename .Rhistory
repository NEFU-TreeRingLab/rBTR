clim.today <- gR.year[Today,]
aatToday <- (clim.today$TEM - temThreshold)
aatToday[aatToday<0] <- 0
actAccumulatedTem <- actAccumulatedTem + aatToday
# print( paste( Today, actAccumulatedTem ,clim.today$rootd )  )
dynparam.growth.t <- L_balance(clim.today, dynparam.growth.t ,fixparam.light)
if (actAccumulatedTem >= fixparam.divi$AT & clim.today$rootd > 0 ) { ## if start 可以生长时计算细胞分裂分化
# print( paste( "START",Today    ) )
newCells <-  cell_division(clim.today, fixparam.divi, fixparam.growth.fiber, fixparam.growth.vessel, dynparam.growth.t,
cells, vessels) ### , TVA,TA
newCells[[1]]  <- stats::na.omit(newCells[[1]])
newCells[[2]]  <- stats::na.omit(newCells[[2]])
# TC <- TC + newCells[[4]][1]
dynparam.growth.t <- newCells[[3]]
# tt2 <- cbind(years,Today,dynparam.growth.t)
interimDailyParam[Today,] <- as.numeric(c(years,Today,dynparam.growth.t))
##
if ( nrow(newCells[[1]]) != 0  ) {
xylogenesis[["cells"]] <- dplyr::bind_rows(xylogenesis[["cells"]],newCells[[1]])
if (nrow(newCells[[2]])!= 0 ) {
xylogenesis[["vessels"]] <- dplyr::bind_rows(xylogenesis[["vessels"]],newCells[[2]])
}
} ## newCells != 0
## 细胞生长部分 #####
# j <- dcl
# k <- dvl
layer.max <- nrow(xylogenesis[["cells"]])
#
# nrow(xylogenesis[["cells"]]$DDOY = 0 )
growthing.cells <- dplyr::filter( xylogenesis[["cells"]] , DDOY == 0  )
if ( layer.max != 0 & nrow( growthing.cells ) != 0 ) {
growthing.cells <- cells_growth(cell = growthing.cells, CorV = "C" , clim.today, layer.max,
fixparam.growth.fiber, fixparam.growth.vessel, dynparam.growth.t )
# growthing.cells$DDOY = clim.today$DOY
rowOfCells <- growthing.cells$cell_L
xylogenesis[["cells"]][rowOfCells,] <- growthing.cells
} ## cell end-------------
layer.max <- nrow(xylogenesis[["vessels"]])
growthing.cells <- dplyr::filter( xylogenesis[["vessels"]], DDOY == 0  )
if( layer.max != 0 & nrow(growthing.cells) != 0  ){  ## 有导管时导管生长
growthing.cells <- cells_growth(cell = growthing.cells, CorV = "V" , clim.today, layer.max,
fixparam.growth.fiber,fixparam.growth.vessel, dynparam.growth.t)
rowOfCells <- growthing.cells$NoV
xylogenesis[["vessels"]][rowOfCells,] <- growthing.cells
} ## 有导管时导管生长 end ---------------------
vesd <- xylogenesis[["vessels"]]
celd <- xylogenesis[["cells"]]
colnames(vesd) <- paste("V", sep = "" , colnames(vesd) )
dailyResult <- dplyr::left_join(celd, vesd, by = c("Year" = "VYear", "cell_L" = "Vcell_L") )
# dailyResult
#%>% mutate(doy = "Today", .after = "Year")
#dailyResult$doy[ dailyResult$doy == "Today"] <- Today
summaryDaily[paste0(Today)] <- list(dailyResult)
} ## if (actAccumulatedTem >= fixparam.divi$AT) end  可生长日期判定结束 -----------------
utils::setTxtProgressBar(pb = pb, value = Today)
# vesd <- xylogenesis[["vessels"]]
# celd <- xylogenesis[["cells"]]
#
#
# colnames(vesd) <- paste("V", sep = "" , colnames(vesd) )
#
# dailyResult = left_join(celd, vesd, by = c("Year" = "VYear", "cell_L" = "Vcell_L") )
#
# # dailyResult
# #%>% mutate(doy = "Today", .after = "Year")
#
# #dailyResult$doy[ dailyResult$doy == "Today"] <- Today
#
# finald[paste0(Today)] <- list(dailyResult)
#
# Today  = Today +1
# Today
} ## today sycle end  每日生长计算结束 ------------------
## 这里需要对年结束进行汇总。
# colnames(xylogenesis[["vessels"]]) <- paste("V", sep = "" , colnames(xylogenesis[["vessels"]]) )
#
# final = left_join(xylogenesis[["cells"]], xylogenesis[["vessels"]], by = c("Year" = "VYear", "cell_L" = "Vcell_L") )
#
# orderd = c("Year","cell_L",
#            "CA" , "CRD","CTD", "CV" ,"CWT", "LWA", "DH", "MORK", "TDOY", "EDOY", "DDOY",
#            "VVN","VCA","VCRD","VCTD","VCV","VCWT","VLWA","VDH","VMORK","VEDOY","VTDOY","VDDOY")
#
dailyParameters <- rbind(dailyParameters,interimDailyParam)
if (intraannual == T) {
data.table::rbindlist(summaryDaily,use.names = T,fill = T,idcol = "doy") %>% dplyr::select(c("Year","doy","cell_L",everything())) %>%
data.table::fwrite(paste0(redir,"/", as.character(years), ".csv" )   )
}
summaryYears[[as.character(years)]]  <- dailyResult %>%  dplyr::select(c("Year","cell_L",everything()))
close(con = pb)
}  ## year cycle end 年生长计算结束------------------
## 合并所有结果
summaryYears <- data.table::rbindlist(summaryYears)
Outputs <- list( summaryYears , microclim, as.data.frame( stats::na.omit(dailyParameters) ) )
names(Outputs) <- c('xylem_trait', 'microclim', 'dailyParameters' )
openxlsx::write.xlsx(Outputs,paste0( redir, "/Outputs.xlsx" ) )
openxlsx::write.xlsx(parameters,file = paste0(redir,"/Parameters.xlsx" ))
print( redir)
return(Outputs)
} ##  TRXXX2 funtion end -----------------------------------------
source("G:/CreatTC/TreeXylogenesis_VPDtest/R/1_MicroClim.R")
1/7
setwd("E:/sup_o/HU-2023.02.22-03.05")
library(tidyverse)
library(openxlsx)
library(dplR)
d1 <- read.rwl("HQ-6种4,6,7号盘年轮-2023.04.27.rwl")
View(d1)
d1 <- read.rwl("HQ-6种4,6,7号盘年轮-2023.04.27.rwl") %>% rownames_to_column("Year")
write.xlsx(d1,"HQ-6种4,6,7号盘年轮-2023.04.27.xlsx")
##
setwd("G:\\CreatTC\\TreeXylogenesis_VPDtest")
source("G:/CreatTC/TreeXylogenesis_VPDtest/R/1_MicroClim.R")
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::check()
remove.packages("rBTR")
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::load_all()
devtools::check()
##
setwd("G:\\CreatTC\\TreeXylogenesis_VPDtest")
devtools::document( )
devtools::load_all( )
Oclim <- read.xlsx("E:\\文档-正在使用\\论文内容\\202207\\model test\\clim_3plot.xlsx",sheet ="HN") %>%
mutate( DOY = daydoy(Year,Month,Day))
# library(TreeXylogenesis)
library(tidyverse)
library(openxlsx)
library(data.table)
library(insol)
Oclim <- read.xlsx("E:\\文档-正在使用\\论文内容\\202207\\model test\\clim_3plot.xlsx",sheet ="HN") %>%
mutate( DOY = daydoy(Year,Month,Day))
rm(parameters,lspres,gg)
# library(TreeXylogenesis)
library(tidyverse)
library(openxlsx)
library(data.table)
library(insol)
##
library(lubridate)
library(ggpubr)
library(tidyverse)
library(openxlsx)
library(data.table)
### Temperature
Td <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "TEM" )
View(Td)
### Temperature
Td <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "TEM" )[,c(1:5:10)]
### Temperature
Td <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "TEM" )[,c(1,5:10)]
View(Td)
Td$平均气温[Td$平均气温 == 32766  ] <-  0 ## 缺测
Td$最高温[Td$最高温 == 32766  ] <-  0 ## 缺测
Td$最低温[Td$最低温 == 32766  ] <-  0 ## 缺测
Td[,c(5:7)] <- Td[,c(5:7)]/10
RHd <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "RHU" )#[,c(1,5:10)]
View(RHd)
RHd <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "RHU" )[,c(1,5:9)]
RHd$平均相对湿度[RHd$平均相对湿度 == 32766 ] <- 0
RHd$最小相对湿度[RHd$最小相对湿度 == 32766 ] <- 0
RHd$平均相对湿度[ RHd$平均相对湿度 == 0 &   RHd$最小相对湿度 != 0 ] <- RHd$最小相对湿度[ RHd$平均相对湿度 == 0 &   RHd$最小相对湿度 != 0 ]
Pred <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\climdata.xlsx",sheet = "PRE" )#[,c(1,5:9)]
View(Pred)
View(RHd)
Pred$`降水20-20时`[Pred$`降水20-20时` == 32766 ] <- 0 ## 缺测
Pred$`降水20-20时`[Pred$`降水20-20时` == 32766 ] <- 0 ## 缺测
Pred$`降水20-20时`[Pred$`降水20-20时` == 32700 ] <- 0.1 ## 微量
Pred$`降水20-20时`[Pred$`降水20-20时` >= 30000 & Pred$`降水20-20时` < 31000   ] <-
Pred$`降水20-20时`[Pred$`降水20-20时` >= 30000 & Pred$`降水20-20时` < 31000   ] - 30000## 降雪
Pred$`降水20-20时`[Pred$`降水20-20时` >= 31000 & Pred$`降水20-20时` < 32000   ] <-
Pred$`降水20-20时`[Pred$`降水20-20时` >= 31000 & Pred$`降水20-20时` < 32000   ] - 30000## 雨雪
Pred$`降水20-20时`[Pred$`降水20-20时` >= 32000] <-
Pred$`降水20-20时`[Pred$`降水20-20时` >= 32000 ] - 32000 ## 雾霜露
Pred$`降水20-20时` <-Pred$`降水20-20时`/10
datas <- left_join(Td,RHd) %>%  left_join(Pred)
getwd()
write.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\Aclim.xlsx")
write.xlsx(datas,"E:\\文档-正在使用\\论文内容\\202303\\修改\\Aclim.xlsx")
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
source("G:/CreatTC/TreeXylogenesis_VPD_newPN/R/1_MicroClim.R")
devtools::load_all( )
# c1 <- read.table("clipboard")
# colnames(c1) <- c("Year", 'Month' , "Day")
# c2 <- read.table("clipboard",header = T)
# Lclimate <- left_join(c1,c2)
# write.csv(Lclimate,"LimitClim.csv")
Lclimate <- read.csv("E:\\文档-正在使用\\论文内容\\202303\\修改\\敏感性检验\\LimitClim.csv")
View(Lclimate)
# c1 <- read.table("clipboard")
# colnames(c1) <- c("Year", 'Month' , "Day")
# c2 <- read.table("clipboard",header = T)
# Lclimate <- left_join(c1,c2)
# write.csv(Lclimate,"LimitClim.csv")
Lclimate <- read.csv("E:\\文档-正在使用\\论文内容\\202303\\修改\\敏感性检验\\LimitClim.csv")
Params <- openxlsx::read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\修改\\敏感性检验\\LSBPp.xlsx")
gg <- TreeXy(Lclimate, Params, wy = T )
min(1,2,3)
min(3,2,1)
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::check()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::build()
??dplR
??utils
library(openxlsx)
LSFM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber")
View(LSFM_fiber)
library(tidyverse)
LSFM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT)
LSFM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR)
LSFM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
FM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
BP_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
FM_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMvessel") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
FM_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMV") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
FM_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
BP_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)
FM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019) %>% mutate(CellType = 'fiber')
BP_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019) %>% mutate(CellType = 'fiber')
FM_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)%>% mutate(CellType = 'vessel')
BP_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)%>% mutate(CellType = 'vessel')
FMcells <- bind_rows(FM_fiber,FM_vessel)
FMcells <- bind_cols(FM_fiber,FM_vessel)
FMcells <- bind_rows(FM_fiber,FM_vessel)
BPcells <- bind_rows(BP_fiber,BP_vessel)
usethis::use_data(FMcells)
use_data_raw(FMcells)
usethis::use_data_raw(FMcells)
usethis::use_data_raw('FMcells')
#' Data of F. mandshurica cells in Liangshui
#'
#'
data(dplR)
??dplR
??mgcv
??treeclim
use_r("data")
usethis::use_r("data")
containing four columns with year,
usethis::use_data(BPcells)
View(BPcells)
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::load_all()
devtools::check()
source("G:/CreatTC/TreeXylogenesis_VPD_newPN/R/1_MicroClim.R")
devtools::document( )
rm(list = c("Compute_clim"))
devtools::document( )
devtools::document( )
devtools::check()
View(BPcells)
View(BPcells)
View(FM_vessel)
td <- FM_vessel %>% spread(key = "Year", value = RRingWidth)
View(td)
td <- FM_vessel %>% spread(key = "Year", value = 'LA')
View(td)
td <- FM_vessel %>% spread(key = "Year", value = 'LA')
td <- FM_vessel %>% spread(key = "Year", value = 'RRingWidth')
rm(td)
td <- FM_vessel %>% spread(key = "Year", value = 'RRingWidth')
View(td)
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::check()
library(rBTR)
detach("package:rBTR", unload = TRUE)
remove.packages("rBTR")
devtools::install()
library(rBTR)
detach("package:rBTR", unload = TRUE)
remove.packages("rBTR")
BP_Ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSBP")
View(BP_Ring)
FM_Ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSFM")
BP_Ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSBP")
FM_Ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSFM")
View(BP_Ring)
View(FM_Ring)
BPring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSBP")
FMring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSFM")
usethis::use_data(BPring)
usethis::use_data(FMring)
head(BPring,2)
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")
View(BPparam)
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3]
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3]
View(BPparam)
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3]
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3]
BPparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3]
FMparam <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3]
usethis::use_data(BPparam)
usethis::use_data(FMparam)
View(FMparam)
FM_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019) %>% mutate(CellType = 'fiber')
BP_fiber <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPfiber") %>%
select(Year, RR, LA, CWT) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019) %>% mutate(CellType = 'fiber')
FM_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "FMV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)%>% mutate(CellType = 'vessel')
BP_vessel <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "BPV") %>%
select(Year, RR, LA) %>% rename(RRingWidth = RR) %>% filter(Year >= 2013,Year <= 2019)%>% mutate(CellType = 'vessel')
FM_cells <- bind_rows(FM_fiber,FM_vessel)
BP_cells <- bind_rows(BP_fiber,BP_vessel)
usethis::use_data(FM_cells)
usethis::use_data(BP_cells)
BP_ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSBP")
FM_ring <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Plot2data.xlsx",sheet = "LSFM")
usethis::use_data(BP_ring)
usethis::use_data(FM_ring)
BP_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3]
FM_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3]
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3]
usethis::use_data(BP_param)
usethis::use_data(FM_param)
usethis::use_data(Clim_param)
View(Clim_param)
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
View(Clim_param)
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
View(Clim_param)
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
usethis::use_data(Clim_param)
usethis::use_data(Clim_param,overwrite = TRUE)
head(BP_param)
BP_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3] %>%
rename( description = description_EN )
FM_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3] %>%
rename( description = description_EN )
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
usethis::use_data(BP_param,overwrite = TRUE)
usethis::use_data(FM_param,overwrite = TRUE)
usethis::use_data(Clim_param,overwrite = TRUE)
head(BP_param)
head(Clim_param)
View(Clim_param)
View(BPparam)
LS_clim <- read.csv("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\LSclim.csv")
View(LS_clim)
usethis::use_data(LS_clim,overwrite = TRUE)
head(LS_clim,2)
devtools::document( )
usethis::use_r("5_SummaryRes")
View(BP_param)
BP_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSBP")[,-3] %>%
rename( description = description_EN )
FM_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "NewPara_LSFM")[,-3] %>%
rename( description = description_EN )
Clim_param <- read.xlsx("E:\\文档-正在使用\\论文内容\\202303\\GithubData\\Table_S.xlsx",sheet = "Para_LSclims")[,-2]
usethis::use_data(BP_param,overwrite = TRUE)
usethis::use_data(FM_param,overwrite = TRUE)
usethis::use_data(Clim_param,overwrite = TRUE)
View(BP_param)
BP_param$values[ BP_param$parameter == "width"]
BP_param$values[ BP_param$parameter == "width"] *3
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
devtools::build()
# usethis::
# use_r("0_MainFun")
# use_r("1_MicroClim")
# use_r("1_5_GR")
# use_r("2_DiviDiffer")
# use_r("3_CellGrowth")
# use_r("4_LBalance")
#
# usethis::use_data(clim,parameter)
# use_r("000_SubMainFun")
devtools::document()
